{"version":3,"sources":["@wordpress/components/src/tools-panel/tools-panel-item/hook.js"],"names":["useToolsPanelItem","props","className","hasValue","isShownByDefault","label","onDeselect","undefined","onSelect","otherProps","cx","classes","styles","ToolsPanelItem","menuItems","registerPanelItem","deregisterPanelItem","isValueSet","isMenuItemChecked","wasMenuItemChecked","isShown"],"mappings":";;;;;;;;;AAGA;;AACA;;AAKA;;AACA;;AACA;;AACA;;AAZA;AACA;AACA;;AAIA;AACA;AACA;AAMO,SAASA,iBAAT,CAA4BC,KAA5B,EAAoC;AAC1C,QAAM;AACLC,IAAAA,SADK;AAELC,IAAAA,QAFK;AAGLC,IAAAA,gBAHK;AAILC,IAAAA,KAJK;AAKLC,IAAAA,UAAU,GAAG,MAAMC,SALd;AAMLC,IAAAA,QAAQ,GAAG,MAAMD,SANZ;AAOL,OAAGE;AAPE,MAQF,gCAAkBR,KAAlB,EAAyB,gBAAzB,CARJ;AAUA,QAAMS,EAAE,GAAG,mBAAX;AACA,QAAMC,OAAO,GAAG,sBAAS,MAAM;AAC9B,WAAOD,EAAE,CAAEE,MAAM,CAACC,cAAT,EAAyBX,SAAzB,CAAT;AACA,GAFe,CAAhB;AAIA,QAAM;AACLY,IAAAA,SADK;AAELC,IAAAA,iBAFK;AAGLC,IAAAA;AAHK,MAIF,oCAJJ,CAhB0C,CAsB1C;AACA;;AACA,0BAAW,MAAM;AAChBD,IAAAA,iBAAiB,CAAE;AAClBZ,MAAAA,QADkB;AAElBC,MAAAA,gBAFkB;AAGlBC,MAAAA;AAHkB,KAAF,CAAjB;AAMA,WAAO,MAAMW,mBAAmB,CAAEX,KAAF,CAAhC;AACA,GARD,EAQG,EARH;AAUA,QAAMY,UAAU,GAAGd,QAAQ,EAA3B,CAlC0C,CAoC1C;AACA;;AACA,QAAMe,iBAAiB,GAAGJ,SAAS,CAAET,KAAF,CAAnC;AACA,QAAMc,kBAAkB,GAAG,0BAAaD,iBAAb,CAA3B,CAvC0C,CAyC1C;AACA;;AACA,0BAAW,MAAM;AAChB,QAAKA,iBAAiB,IAAI,CAAED,UAAvB,IAAqC,CAAEE,kBAA5C,EAAiE;AAChEX,MAAAA,QAAQ;AACR;;AAED,QAAK,CAAEU,iBAAF,IAAuBC,kBAA5B,EAAiD;AAChDb,MAAAA,UAAU;AACV;AACD,GARD,EAQG,CAAEY,iBAAF,EAAqBC,kBAArB,EAAyCF,UAAzC,CARH;AAUA,SAAO,EACN,GAAGR,UADG;AAENW,IAAAA,OAAO,EAAEF,iBAFH;AAGNhB,IAAAA,SAAS,EAAES;AAHL,GAAP;AAKA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { usePrevious } from '@wordpress/compose';\nimport { useEffect, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport * as styles from '../styles';\nimport { useToolsPanelContext } from '../context';\nimport { useContextSystem } from '../../ui/context';\nimport { useCx } from '../../utils/hooks/use-cx';\n\nexport function useToolsPanelItem( props ) {\n\tconst {\n\t\tclassName,\n\t\thasValue,\n\t\tisShownByDefault,\n\t\tlabel,\n\t\tonDeselect = () => undefined,\n\t\tonSelect = () => undefined,\n\t\t...otherProps\n\t} = useContextSystem( props, 'ToolsPanelItem' );\n\n\tconst cx = useCx();\n\tconst classes = useMemo( () => {\n\t\treturn cx( styles.ToolsPanelItem, className );\n\t} );\n\n\tconst {\n\t\tmenuItems,\n\t\tregisterPanelItem,\n\t\tderegisterPanelItem,\n\t} = useToolsPanelContext();\n\n\t// Registering the panel item allows the panel to include it in its\n\t// automatically generated menu and determine its initial checked status.\n\tuseEffect( () => {\n\t\tregisterPanelItem( {\n\t\t\thasValue,\n\t\t\tisShownByDefault,\n\t\t\tlabel,\n\t\t} );\n\n\t\treturn () => deregisterPanelItem( label );\n\t}, [] );\n\n\tconst isValueSet = hasValue();\n\n\t// Note: `label` is used as a key when building menu item state in\n\t// `ToolsPanel`.\n\tconst isMenuItemChecked = menuItems[ label ];\n\tconst wasMenuItemChecked = usePrevious( isMenuItemChecked );\n\n\t// Determine if the panel item's corresponding menu is being toggled and\n\t// trigger appropriate callback if it is.\n\tuseEffect( () => {\n\t\tif ( isMenuItemChecked && ! isValueSet && ! wasMenuItemChecked ) {\n\t\t\tonSelect();\n\t\t}\n\n\t\tif ( ! isMenuItemChecked && wasMenuItemChecked ) {\n\t\t\tonDeselect();\n\t\t}\n\t}, [ isMenuItemChecked, wasMenuItemChecked, isValueSet ] );\n\n\treturn {\n\t\t...otherProps,\n\t\tisShown: isMenuItemChecked,\n\t\tclassName: classes,\n\t};\n}\n"]}