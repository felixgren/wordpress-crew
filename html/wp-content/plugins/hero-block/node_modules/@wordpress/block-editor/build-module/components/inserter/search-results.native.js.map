{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/search-results.native.js"],"names":["useSelect","searchItems","BlockTypesList","InserterNoResults","store","blockEditorStore","useBlockTypeImpressions","NON_BLOCK_CATEGORIES","ALLOWED_EMBED_VARIATIONS","InserterSearchResults","filterValue","onSelect","listProps","rootClientId","isFullScreen","blockTypes","select","allItems","getInserterItems","blockItems","filter","id","category","includes","filteredItems","items","trackBlockTypeSelected","length","handleSelect","args"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,SAAT,QAA0B,iBAA1B;AAEA;AACA;AACA;;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,OAAOC,cAAP,MAA2B,qBAA3B;AACA,OAAOC,iBAAP,MAA8B,cAA9B;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,aAA1C;AACA,OAAOC,uBAAP,MAAoC,oCAApC;AAEA,MAAMC,oBAAoB,GAAG,CAAE,UAAF,CAA7B;AACA,MAAMC,wBAAwB,GAAG,CAAE,YAAF,CAAjC;;AAEA,SAASC,qBAAT,CAAgC;AAC/BC,EAAAA,WAD+B;AAE/BC,EAAAA,QAF+B;AAG/BC,EAAAA,SAH+B;AAI/BC,EAAAA,YAJ+B;AAK/BC,EAAAA;AAL+B,CAAhC,EAMI;AACH,QAAM;AAAEC,IAAAA;AAAF,MAAiBf,SAAS,CAC7BgB,MAAF,IAAc;AACb,UAAMC,QAAQ,GAAGD,MAAM,CAAEX,gBAAF,CAAN,CAA2Ba,gBAA3B,CAChBL,YADgB,CAAjB;AAIA,UAAMM,UAAU,GAAGF,QAAQ,CAACG,MAAT,CAClB,CAAE;AAAEC,MAAAA,EAAF;AAAMC,MAAAA;AAAN,KAAF,KACC,CAAEf,oBAAoB,CAACgB,QAArB,CAA+BD,QAA/B,CAAF,MACA;AACA;AACA;AACEA,IAAAA,QAAQ,KAAK,OAAb,IACCA,QAAQ,KAAK,OAAb,IACDd,wBAAwB,CAACe,QAAzB,CAAmCF,EAAnC,CANF,CAFiB,CAAnB;AAWA,UAAMG,aAAa,GAAGvB,WAAW,CAAEkB,UAAF,EAAcT,WAAd,CAAjC;AAEA,WAAO;AAAEK,MAAAA,UAAU,EAAES;AAAd,KAAP;AACA,GApB8B,EAqB/B,CAAEX,YAAF,EAAgBH,WAAhB,CArB+B,CAAhC;AAwBA,QAAM;AAAEe,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAoCpB,uBAAuB,CAChES,UADgE,CAAjE;;AAIA,MAAK,CAAEU,KAAF,IAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEE,MAAP,MAAkB,CAAlC,EAAsC;AACrC,WAAO,cAAC,iBAAD,OAAP;AACA;;AAED,QAAMC,YAAY,GAAG,CAAE,GAAGC,IAAL,KAAe;AACnCH,IAAAA,sBAAsB,CAAE,GAAGG,IAAL,CAAtB;AACAlB,IAAAA,QAAQ,CAAE,GAAGkB,IAAL,CAAR;AACA,GAHD;;AAKA,SACC,cAAC,cAAD;AACC,IAAA,IAAI,EAAC,QADN;AAEC,IAAA,kBAAkB,EAAGf,YAAY,GAAG,EAAH,GAAQ,CAF1C;AAGQW,IAAAA,KAHR;AAGed,IAAAA,QAAQ,EAAEiB,YAHzB;AAGuChB,IAAAA;AAHvC,IADD;AAOA;;AAED,eAAeH,qBAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { searchItems } from './search-items';\nimport BlockTypesList from '../block-types-list';\nimport InserterNoResults from './no-results';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockTypeImpressions from './hooks/use-block-type-impressions';\n\nconst NON_BLOCK_CATEGORIES = [ 'reusable' ];\nconst ALLOWED_EMBED_VARIATIONS = [ 'core/embed' ];\n\nfunction InserterSearchResults( {\n\tfilterValue,\n\tonSelect,\n\tlistProps,\n\trootClientId,\n\tisFullScreen,\n} ) {\n\tconst { blockTypes } = useSelect(\n\t\t( select ) => {\n\t\t\tconst allItems = select( blockEditorStore ).getInserterItems(\n\t\t\t\trootClientId\n\t\t\t);\n\n\t\t\tconst blockItems = allItems.filter(\n\t\t\t\t( { id, category } ) =>\n\t\t\t\t\t! NON_BLOCK_CATEGORIES.includes( category ) &&\n\t\t\t\t\t// We don't want to show all possible embed variations\n\t\t\t\t\t// as different blocks in the inserter. We'll only show a\n\t\t\t\t\t// few popular ones.\n\t\t\t\t\t( category !== 'embed' ||\n\t\t\t\t\t\t( category === 'embed' &&\n\t\t\t\t\t\t\tALLOWED_EMBED_VARIATIONS.includes( id ) ) )\n\t\t\t);\n\n\t\t\tconst filteredItems = searchItems( blockItems, filterValue );\n\n\t\t\treturn { blockTypes: filteredItems };\n\t\t},\n\t\t[ rootClientId, filterValue ]\n\t);\n\n\tconst { items, trackBlockTypeSelected } = useBlockTypeImpressions(\n\t\tblockTypes\n\t);\n\n\tif ( ! items || items?.length === 0 ) {\n\t\treturn <InserterNoResults />;\n\t}\n\n\tconst handleSelect = ( ...args ) => {\n\t\ttrackBlockTypeSelected( ...args );\n\t\tonSelect( ...args );\n\t};\n\n\treturn (\n\t\t<BlockTypesList\n\t\t\tname=\"Blocks\"\n\t\t\tinitialNumToRender={ isFullScreen ? 10 : 3 }\n\t\t\t{ ...{ items, onSelect: handleSelect, listProps } }\n\t\t/>\n\t);\n}\n\nexport default InserterSearchResults;\n"]}