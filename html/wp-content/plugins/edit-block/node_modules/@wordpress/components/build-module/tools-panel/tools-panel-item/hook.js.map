{"version":3,"sources":["@wordpress/components/src/tools-panel/tools-panel-item/hook.js"],"names":["usePrevious","useEffect","useMemo","styles","useToolsPanelContext","useContextSystem","useCx","useToolsPanelItem","props","className","hasValue","isShownByDefault","label","onDeselect","undefined","onSelect","otherProps","cx","classes","ToolsPanelItem","menuItems","registerPanelItem","deregisterPanelItem","isValueSet","isMenuItemChecked","wasMenuItemChecked","isShown"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAT,QAA4B,oBAA5B;AACA,SAASC,SAAT,EAAoBC,OAApB,QAAmC,oBAAnC;AAEA;AACA;AACA;;AACA,OAAO,KAAKC,MAAZ,MAAwB,WAAxB;AACA,SAASC,oBAAT,QAAqC,YAArC;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AACA,SAASC,KAAT,QAAsB,0BAAtB;AAEA,OAAO,SAASC,iBAAT,CAA4BC,KAA5B,EAAoC;AAC1C,QAAM;AACLC,IAAAA,SADK;AAELC,IAAAA,QAFK;AAGLC,IAAAA,gBAHK;AAILC,IAAAA,KAJK;AAKLC,IAAAA,UAAU,GAAG,MAAMC,SALd;AAMLC,IAAAA,QAAQ,GAAG,MAAMD,SANZ;AAOL,OAAGE;AAPE,MAQFX,gBAAgB,CAAEG,KAAF,EAAS,gBAAT,CARpB;AAUA,QAAMS,EAAE,GAAGX,KAAK,EAAhB;AACA,QAAMY,OAAO,GAAGhB,OAAO,CAAE,MAAM;AAC9B,WAAOe,EAAE,CAAEd,MAAM,CAACgB,cAAT,EAAyBV,SAAzB,CAAT;AACA,GAFsB,CAAvB;AAIA,QAAM;AACLW,IAAAA,SADK;AAELC,IAAAA,iBAFK;AAGLC,IAAAA;AAHK,MAIFlB,oBAAoB,EAJxB,CAhB0C,CAsB1C;AACA;;AACAH,EAAAA,SAAS,CAAE,MAAM;AAChBoB,IAAAA,iBAAiB,CAAE;AAClBX,MAAAA,QADkB;AAElBC,MAAAA,gBAFkB;AAGlBC,MAAAA;AAHkB,KAAF,CAAjB;AAMA,WAAO,MAAMU,mBAAmB,CAAEV,KAAF,CAAhC;AACA,GARQ,EAQN,EARM,CAAT;AAUA,QAAMW,UAAU,GAAGb,QAAQ,EAA3B,CAlC0C,CAoC1C;AACA;;AACA,QAAMc,iBAAiB,GAAGJ,SAAS,CAAER,KAAF,CAAnC;AACA,QAAMa,kBAAkB,GAAGzB,WAAW,CAAEwB,iBAAF,CAAtC,CAvC0C,CAyC1C;AACA;;AACAvB,EAAAA,SAAS,CAAE,MAAM;AAChB,QAAKuB,iBAAiB,IAAI,CAAED,UAAvB,IAAqC,CAAEE,kBAA5C,EAAiE;AAChEV,MAAAA,QAAQ;AACR;;AAED,QAAK,CAAES,iBAAF,IAAuBC,kBAA5B,EAAiD;AAChDZ,MAAAA,UAAU;AACV;AACD,GARQ,EAQN,CAAEW,iBAAF,EAAqBC,kBAArB,EAAyCF,UAAzC,CARM,CAAT;AAUA,SAAO,EACN,GAAGP,UADG;AAENU,IAAAA,OAAO,EAAEF,iBAFH;AAGNf,IAAAA,SAAS,EAAES;AAHL,GAAP;AAKA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { usePrevious } from '@wordpress/compose';\nimport { useEffect, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport * as styles from '../styles';\nimport { useToolsPanelContext } from '../context';\nimport { useContextSystem } from '../../ui/context';\nimport { useCx } from '../../utils/hooks/use-cx';\n\nexport function useToolsPanelItem( props ) {\n\tconst {\n\t\tclassName,\n\t\thasValue,\n\t\tisShownByDefault,\n\t\tlabel,\n\t\tonDeselect = () => undefined,\n\t\tonSelect = () => undefined,\n\t\t...otherProps\n\t} = useContextSystem( props, 'ToolsPanelItem' );\n\n\tconst cx = useCx();\n\tconst classes = useMemo( () => {\n\t\treturn cx( styles.ToolsPanelItem, className );\n\t} );\n\n\tconst {\n\t\tmenuItems,\n\t\tregisterPanelItem,\n\t\tderegisterPanelItem,\n\t} = useToolsPanelContext();\n\n\t// Registering the panel item allows the panel to include it in its\n\t// automatically generated menu and determine its initial checked status.\n\tuseEffect( () => {\n\t\tregisterPanelItem( {\n\t\t\thasValue,\n\t\t\tisShownByDefault,\n\t\t\tlabel,\n\t\t} );\n\n\t\treturn () => deregisterPanelItem( label );\n\t}, [] );\n\n\tconst isValueSet = hasValue();\n\n\t// Note: `label` is used as a key when building menu item state in\n\t// `ToolsPanel`.\n\tconst isMenuItemChecked = menuItems[ label ];\n\tconst wasMenuItemChecked = usePrevious( isMenuItemChecked );\n\n\t// Determine if the panel item's corresponding menu is being toggled and\n\t// trigger appropriate callback if it is.\n\tuseEffect( () => {\n\t\tif ( isMenuItemChecked && ! isValueSet && ! wasMenuItemChecked ) {\n\t\t\tonSelect();\n\t\t}\n\n\t\tif ( ! isMenuItemChecked && wasMenuItemChecked ) {\n\t\t\tonDeselect();\n\t\t}\n\t}, [ isMenuItemChecked, wasMenuItemChecked, isValueSet ] );\n\n\treturn {\n\t\t...otherProps,\n\t\tisShown: isMenuItemChecked,\n\t\tclassName: classes,\n\t};\n}\n"]}